<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Therapie-Satire – 6 Fragen pro Sitzung</title>
<style>
  :root{--ink:#222;--paper:#fff8ea;--accent:#d33;--btn:#222;--btnText:#fff;--btnHover:#444;}
  html,body{margin:0;height:100%;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#111;}
  .game{min-height:100dvh;display:grid;place-items:center;padding:16px;background:#111;}
  .card{width:min(820px,95vw);background:var(--paper);color:var(--ink);
        border:3px solid #000;border-radius:14px;box-shadow:0 12px 40px rgba(0,0,0,.35);overflow:hidden;}
  .hero{position:relative;aspect-ratio:16/9;background:#e9dfc8;border-bottom:3px solid #000;}
  .hero::after{content:"";position:absolute;inset:0;background:linear-gradient(to top, rgba(255,248,234,.7), rgba(255,248,234,.08) 60%, transparent);}
  .inner{padding:44px 16px 10px;} /* etwas höher */
  .title{font-weight:800;font-size:1.35rem;margin:0 0 8px;}
  .text{margin:0 0 12px;color:#3a342d;line-height:1.35;}
  .answers{display:grid;gap:10px;margin-top:10px;}
  button.answer{border:3px solid #000;background:var(--btn);color:var(--btnText);
                padding:12px 14px;border-radius:10px;text-align:left;font-weight:700;cursor:pointer;}
  button.answer:hover{background:var(--btnHover);}
  .bar{height:10px;background:#00000010;border:2px solid #000;border-radius:8px;overflow:hidden;margin:8px 0 0;}
  .bar>i{display:block;height:100%;width:0%;background:linear-gradient(90deg,#f7c52b,#ef6b2d);}
  .row{display:flex;gap:10px;justify-content:space-between;align-items:center;}
  .pill{font:700 .8rem/1 monospace;background:#000;color:#fff;padding:6px 10px;border-radius:999px;border:2px solid #000;}
  .footer{display:flex;gap:8px;justify-content:flex-end;margin-top:12px;}
  .btn{border:3px solid #000;border-radius:10px;padding:10px 14px;font-weight:800;background:#fff;cursor:pointer;}
  .btn.primary{background:var(--accent);color:#fff;}
  .btn:hover{filter:brightness(.95);}
  /* Fallback-"Hintergründe" (Farben statt Bilder) */
  .bg-waiting{background:#cfd8dc;}
  .bg-therapist{background:#ffe0b2;}
  .bg-office{background:#d1c4e9;}
  .bg-paper{background:#fff3e0;}
  .bg-door{background:#c8e6c9;}
  .bg-badge{position:absolute;right:8px;bottom:8px;background:#000;color:#fff;font:700 .8rem/1.1 monospace;padding:6px 8px;border-radius:6px;opacity:.75}
  @media (max-width:420px){.title{font-size:1.15rem}button.answer{font-size:.95rem}}
</style>
</head>
<body>
<div class="game">
  <div class="card">
    <div id="scene" class="hero bg-waiting"><span id="badge" class="bg-badge">Wartezimmer</span></div>
    <div class="inner">
      <div class="row">
        <h1 class="title" id="title">Wartezimmer</h1>
        <span class="pill" id="step">0/6</span>
      </div>
      <p class="text" id="text">Sie betreten das Wartezimmer. Eine Uhr tickt. „Der/Die Nächste, bitte…“</p>
      <div class="answers" id="answers"></div>
      <div class="footer" id="footer"></div>
      <div class="bar"><i id="progress"></i></div>
    </div>
  </div>
</div>

<script>
/* Szenen per Farb-Fallback */
const SCENE_CLASS = { waiting:'bg-waiting', therapist:'bg-therapist', office:'bg-office', paper:'bg-paper', door:'bg-door' };

/* Sitzungslänge */
const SESSION_SIZE = 6;

/* Fragenpool (jede Frage hat GENAU 3 Antworten: gesund/unklar/krankhaft) */
const QUESTIONS_POOL = [
  // Stimmung/Energie
  {scene:'therapist', q:'Wie würden Sie Ihre Stimmung heute nennen?', a:[
    {t:'Ziemlich ausgeglichen.', w:-1},
    {t:'Mal so, mal so.', w:0},
    {t:'Komplett Achterbahn.', w:1}
  ]},
  {scene:'office', q:'Wie war Ihr Schlaf letzte Nacht?', a:[
    {t:'Durchgeschlafen.', w:-1},
    {t:'Unruhig, aber okay.', w:0},
    {t:'Gefühlt gar nicht.', w:1}
  ]},
  {scene:'therapist', q:'Morgendliche Energie?', a:[
    {t:'Ich starte gut.', w:-1},
    {t:'Gemischt.', w:0},
    {t:'Zombie-Modus.', w:1}
  ]},
  {scene:'office', q:'Appetit heute?', a:[
    {t:'Normal/ausgewogen.', w:-1},
    {t:'Schwankend.', w:0},
    {t:'Nur Snacks & Zucker.', w:1}
  ]},
  {scene:'therapist', q:'Wie oft lachen Sie an einem Tag?', a:[
    {t:'Mehrmals.', w:-1},
    {t:'Kommt vor.', w:0},
    {t:'Selten bis nie.', w:1}
  ]},
  {scene:'office', q:'Wie oft fühlen Sie sich überfordert?', a:[
    {t:'Selten, kriege es geregelt.', w:-1},
    {t:'Manchmal.', w:0},
    {t:'Dauerzustand.', w:1}
  ]},

  // Alltag/Verhalten
  {scene:'therapist', q:'Tagesstruktur heute?', a:[
    {t:'Klare Routine.', w:-1},
    {t:'Grober Plan.', w:0},
    {t:'Plan? Welcher Plan?', w:1}
  ]},
  {scene:'office', q:'Pausen im Alltag?', a:[
    {t:'Regelmäßig & bewusst.', w:-1},
    {t:'Wenn ich dran denke.', w:0},
    {t:'Pausen sind Schwäche.', w:1}
  ]},
  {scene:'therapist', q:'Bewegung/Sport zuletzt?', a:[
    {t:'Regelmäßig.', w:-1},
    {t:'Selten.', w:0},
    {t:'Nur Kühlschrank-Sprints.', w:1}
  ]},
  {scene:'office', q:'Ernährung im Schnitt?', a:[
    {t:'Relativ ausgewogen.', w:-1},
    {t:'Wechselhaft.', w:0},
    {t:'Energy & Chips', w:1}
  ]},
  {scene:'therapist', q:'Umgang mit Aufgaben?', a:[
    {t:'Strukturiert, packe an.', w:-1},
    {t:'Kommt auf die Laune an.', w:0},
    {t:'Ich verdränge sie weg.', w:1}
  ]},
  {scene:'office', q:'Entscheidungen treffen?', a:[
    {t:'Zügig & bedacht.', w:-1},
    {t:'Mit Mühe.', w:0},
    {t:'Komplette Entscheidungsblockade.', w:1}
  ]},

  // Soziales
  {scene:'therapist', q:'Sozialer Kontakt diese Woche?', a:[
    {t:'Regelmäßig mit Freunden.', w:-1},
    {t:'Ein bisschen.', w:0},
    {t:'Nur mit meinem Spiegelbild.', w:1}
  ]},
  {scene:'office', q:'Konflikte lösen Sie…', a:[
    {t:'Sachlich & fair.', w:-1},
    {t:'Unentschlossen.', w:0},
    {t:'Mit Explosion oder Flucht.', w:1}
  ]},
  {scene:'therapist', q:'Fühlen Sie sich oft einsam?', a:[
    {t:'Selten.', w:-1},
    {t:'Manchmal.', w:0},
    {t:'Sehr häufig.', w:1}
  ]},
  {scene:'office', q:'Vertrauen in andere?', a:[
    {t:'Grundsätzlich ja.', w:-1},
    {t:'Kommt drauf an.', w:0},
    {t:'Nur meiner Zimmerpflanze.', w:1}
  ]},
  {scene:'therapist', q:'Gruppensituationen?', a:[
    {t:'Fühle mich okay.', w:-1},
    {t:'Eher still.', w:0},
    {t:'Will fliehen.', w:1}
  ]},
  {scene:'office', q:'Familienklima?', a:[
    {t:'Gut.', w:-1},
    {t:'Durchwachsen.', w:0},
    {t:'Dauerkrise.', w:1}
  ]},

  // Kognition/Wahrnehmung
  {scene:'therapist', q:'Gedankenkreisen?', a:[
    {t:'Kann stoppen/umlenken.', w:-1},
    {t:'Manchmal schwer.', w:0},
    {t:'Karussell nonstop.', w:1}
  ]},
  {scene:'office', q:'Realitätszweifel?', a:[
    {t:'Selten bis nie.', w:-1},
    {t:'Kurzzeitig.', w:0},
    {t:'Ständig – Matrix confirmed.', w:1}
  ]},
  {scene:'therapist', q:'Stimmen hören?', a:[
    {t:'Nein.', w:-1},
    {t:'Nur die innere Stimme.', w:0},
    {t:'Ja, im Chor mit Bass.', w:1}
  ]},
  {scene:'office', q:'Fixe Rituale?', a:[
    {t:'Kaum.', w:-1},
    {t:'Ein paar harmlose.', w:0},
    {t:'37 Handgriffe vor jeder Tür.', w:1}
  ]},
  {scene:'therapist', q:'Ablenkbarkeit?', a:[
    {t:'Gering.', w:-1},
    {t:'Mittel.', w:0},
    {t:'Hoch – Eichhörnchen!', w:1}
  ]},
  {scene:'office', q:'Katastrophisieren?', a:[
    {t:'Selten.', w:-1},
    {t:'Passiert mal.', w:0},
    {t:'Dauernd.', w:1}
  ]},

  // Arbeit/Leistung
  {scene:'therapist', q:'Arbeitseinstellung?', a:[
    {t:'Motiviert & zuverlässig.', w:-1},
    {t:'Schwankend.', w:0},
    {t:'Boykottiere innerlich.', w:1}
  ]},
  {scene:'office', q:'Regeln & Deadlines?', a:[
    {t:'Sinnvoll, halte ich ein.', w:-1},
    {t:'Manchmal knapp.', w:0},
    {t:'Zum Brechen da.', w:1}
  ]},
  {scene:'therapist', q:'Pausen im Job?', a:[
    {t:'Regelmäßig.', w:-1},
    {t:'Vergesse ich.', w:0},
    {t:'Völlig unnötig.', w:1}
  ]},
  {scene:'office', q:'Nachtschichten?', a:[
    {t:'Selten.', w:-1},
    {t:'Ab und zu.', w:0},
    {t:'Immer – ich bin die Eule.', w:1}
  ]},
  {scene:'therapist', q:'Rückschläge?', a:[
    {t:'Anpassen & weiter.', w:-1},
    {t:'Kurzer Einbruch.', w:0},
    {t:'Aufgeben.', w:1}
  ]},
  {scene:'office', q:'Selbstdisziplin?', a:[
    {t:'Konsequent.', w:-1},
    {t:'Phasenweise.', w:0},
    {t:'Kaum vorhanden.', w:1}
  ]},

  // Easter Eggs (humorvoll, aber gleiche w-Logik)
  {scene:'therapist', q:'Hat die Uhr im Wartezimmer schon mal mit Ihnen gesprochen?', a:[
    {t:'Nein, es ist eine Uhr.', w:-1},
    {t:'Sie tickt… verdächtig.', w:0},
    {t:'Ja, sie flüstert Deadlines.', w:1}
  ]},
  {scene:'office', q:'Redet Ihre Zimmerpflanze „Herr Stachel“ mit Ihnen?', a:[
    {t:'Nur in meiner Fantasie.', w:0},
    {t:'Nein, ich giesse sie einfach.', w:-1},
    {t:'Ja, sie gibt Ratschläge.', w:1}
  ]},
  {scene:'therapist', q:'Vertrauen Sie Tassen, deren Henkel nach Osten zeigen?', a:[
    {t:'Mir egal – Tasse ist Tasse.', w:-1},
    {t:'Kommt auf die Tagesform an.', w:0},
    {t:'Nur diese sind sicher.', w:1}
  ]},
  {scene:'office', q:'Sehen Sie in Wolken geheime Botschaften?', a:[
    {t:'Hübsche Formen, weiter nix.', w:-1},
    {t:'Manchmal Tiere.', w:0},
    {t:'Ja, vollständige Verträge.', w:1}
  ]},
  {scene:'therapist', q:'Wie reagieren Sie, wenn der Toaster springt?', a:[
    {t:'Frühstück, normal.', w:-1},
    {t:'Kurz zusammengezuckt.', w:0},
    {t:'Deckung! Hinterhalt!', w:1}
  ]},
  {scene:'office', q:'Glauben Sie, dieses Spiel bewertet fair?', a:[
    {t:'Es ist Satire – entspann dich.', w:0},
    {t:'Es stempelt sowieso alles.', w:0},
    {t:'Es liest meine Gedanken!', w:1}
  ]}
];

/* Diagnosen (wiederholen okay, satirisch) */
const DIAGNOSES = {
  light: [
    'Adaptive Alltags-Schwankung (v1.1)',
    'Introvertiv-affektive Phase – Frühstadium',
    'Situationsbedingte Montagsmüdigkeit (chronisch leicht)',
    'Post-Netflix-Erschöpfung light',
    'Milde Alltagsparanoia – Coffee-to-go'
  ],
  medium: [
    'Bipolare Episode 3. Grades (handelsüblich)',
    'Zweifache Borderline-Tendenz (Trial-Version)',
    'Dysthymie mit Kaffeesucht-Komorbidität',
    'Cyclothymie Beta 2.0',
    'Chronische Prokrastinationsneurose'
  ],
  heavy: [
    'Bipolare Episode 10. Grades (mit Konfetti)',
    'Mega-Paranoid (Limited Collector’s Cut)',
    'Giga-Schizophrenie – Deluxe Bundle',
    'Akute Realitätsskepsis – Hardcore Edition',
    'Multidimensionale Identitätsfragmentierung'
  ],
  work_off: [
    'Systemübergreifende Funktionsunfähigkeit – Amtlich gestempelt',
    'Ultra-Borderline Pro Max (mit Pausentaste)',
    'Hyper-Cyclothymie 9000 (Arbeitsfreistellung empfohlen)',
    'Burnout Infernalis (Sonderurlaub erforderlich)',
    'Totaler Realitätsverlust Deluxe (inkl. Krankenschein)'
  ]
};

/* ======== State & UI ======== */
let step = 0, score = 0;
let QUESTIONS_SESSION = []; // 6 zufällige Fragen
const $scene = document.getElementById('scene');
const $badge = document.querySelector('#scene .bg-badge') || document.createElement('span');
const $title = document.getElementById('title');
const $text  = document.getElementById('text');
const $answers = document.getElementById('answers');
const $footer = document.getElementById('footer');
const $prog = document.getElementById('progress');
const $step = document.getElementById('step');

function setScene(name){
  $scene.className = 'hero';
  $scene.classList.add(
    name==='waiting' ? 'bg-waiting' :
    name==='therapist' ? 'bg-therapist' :
    name==='office' ? 'bg-office' :
    name==='paper' ? 'bg-paper' :
    name==='door' ? 'bg-door' : 'bg-office'
  );
  let label = 'Szene';
  if(name==='waiting') label='Wartezimmer';
  else if(name==='therapist') label='Therapeut';
  else if(name==='office') label='Praxis';
  else if(name==='paper') label='Diagnose';
  else if(name==='door') label='Next Patient';
  $badge.className='bg-badge'; $badge.textContent=label;
  if(!$scene.contains($badge)) $scene.appendChild($badge);
}
function setProgress(){
  const pct = Math.round((step/SESSION_SIZE)*100);
  $prog.style.width = pct + '%';
  document.getElementById('step').textContent = `${Math.min(step,SESSION_SIZE)}/${SESSION_SIZE}`;
}
function clearUI(){ $answers.innerHTML=''; $footer.innerHTML=''; }

function sampleSession(){
  // Fisher-Yates Shuffle + Slice
  const arr = QUESTIONS_POOL.slice();
  for(let i=arr.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
  return arr.slice(0, SESSION_SIZE);
}

function showIntro(){
  setScene('waiting');
  $title.textContent = 'Wartezimmer';
  $text.textContent = 'Sie sitzen. Die Uhr tickt. „Der/Die Nächste bitte…“';
  clearUI();
  const go = document.createElement('button');
  go.className='btn primary'; go.textContent='Therapie beginnen';
  go.onclick = ()=>{
    QUESTIONS_SESSION = sampleSession();
    step = 0; score = 0; setProgress(); nextQuestion();
  };
  $footer.append(go);
  step = 0; score = 0; setProgress();
}

function nextQuestion(){
  if(step >= SESSION_SIZE) return finish();
  const item = QUESTIONS_SESSION[step];
  setScene(item.scene||'office');
  $title.textContent = `Sitzung`;
  $text.textContent = item.q;
  clearUI();
  item.a.forEach(opt=>{
    const b = document.createElement('button');
    b.className='answer'; b.textContent=opt.t;
    b.onclick=()=>{
      score += (opt.w??0);
      step++; setProgress();
      $text.textContent='…der Therapeut nickt und notiert geheimnisvolle Kürzel.';
      setTimeout(()=> step<SESSION_SIZE ? nextQuestion() : finish(), 360);
    };
    $answers.appendChild(b);
  });
}

function finish(){
  setScene('paper');
  clearUI();

  // Bucket anhand Score (6 Antworten je -1/0/+1)
  // Summe ∈ [-6, +6]
  let bucket='medium';
  if(score <= -2) bucket='light';
  else if(score >= 3) bucket='heavy';

  // Arbeitsunfähigkeit-Chance
  const workChance = bucket==='heavy' ? 0.35 : bucket==='medium' ? 0.25 : 0.20;
  const work = Math.random() < workChance;
  const list = work ? DIAGNOSES.work_off : DIAGNOSES[bucket];
  const dx = list[Math.floor(Math.random()*list.length)];

  $title.textContent='Diagnose';
  $text.innerHTML = `<strong style="font-size:1.25rem">DIAGNOSE:</strong><br>${dx}`;

  const again = document.createElement('button');
  again.className='btn primary'; again.textContent='Neue Sitzung';
  again.onclick=()=>{
    setScene('door');
    $title.textContent='NEXT PATIENT';
    $text.textContent='Die Tür fällt zu. Tief durchatmen…';
    clearUI();
    const b = document.createElement('button');
    b.className='btn'; b.textContent='Zurück ins Wartezimmer';
    b.onclick=showIntro;
    $footer.appendChild(b);
    setProgress();
  };

  const share = document.createElement('button');
  share.className='btn'; share.textContent='Zitat kopieren';
  share.onclick=()=>{
    const clip = `Therapie-Satire – Diagnose: ${dx} (Score ${score}, ${new Date().toLocaleDateString()})`;
    navigator.clipboard?.writeText(clip);
    share.textContent='Kopiert ✅';
  };

  $footer.append(share, again);
  step = SESSION_SIZE; setProgress();
}

/* Start */
showIntro();
</script>
</body>
</html>